<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="user/inc/layout">
<head>
    <meta charset="UTF-8">
    <title>Product-List</title>
    <link rel="stylesheet" href="/css/user/product/list.css">
    <script type="module" src="/js/user/product/list.js" defer></script>
</head>

<body>
    <main layout:fragment="main" class="d:flex fl-dir:column gap:8 md:gap:20 max-w:10 w:10p pr:4 pl:4 md:pr:0 md:pl:0 ">

        <!--  카테고리  -->
        <section id="sort" class="w:10p d:flex ai:center jc:space-between">
            <h1 class="d:none">정렬 카테고리</h1>
            <div>
                <div class="md:d:none">
                    <a href="#" class="icon icon:squares_four">정렬버튼</a>
                    <a href="#" class="icon icon:list_bullets d:none">정렬버튼</a>
                </div>
                <div class="d:none md:d:block">
                    <select name="" class="align-number">
                        <option selected value="20">20개씩 보기</option>
                        <option value="40">40개씩 보기</option>
                        <option value="60">60개씩 보기</option>
                        <option value="80">80개씩 보기</option>
                    </select>
                </div>
            </div>

            <div class="pos:relative d:flex gap:3">
                <a href="" class="price">가격순</a>
                <span class="bar"></span>
                <a href="" class="recommend">추천순</a>
            </div>
        </section>

        <!--  상품 영역 모바일  -->
        <section id="prd-list">
            <h1 class="d:none">상품 리스트</h1>

            <!--  아이템 목록(리스트 / 확인)  -->
            <section class="menu-card-row d:flex fl-dir:column md:d:none gap:5">
                <h1 class="d:none">상품카드 - row</h1>
                <div th:each="m:${list}">
                    <a href="" th:href="@{/user/product/detail(id=${m.id})}">
                    <div class="d:flex w:10p gap:3">
                        <div class="pos:relative">
                            <img th:src="${m.thumbnailPath + '/Meongmeong.jpg'}" src="" height="110px" width="110px" alt="상품 이미지" class="bd-radius:4"/>
                            <div class="cart-section">
                                <div class="cart-box" th:data-id="${m.id}"
                                     th:classappend="${m.cartQty}!= null ?'bg-color:main-6' ">
                                    <span th:if="${m.cartQty == null}"
                                          class="icon icon:shopping_cart_simple icon-color:base-1 icon-size:4">장바구니아이콘
                                    </span>
                                    <span th:if="${m.cartQty != null}" th:text="${m.cartQty}" class="color:base-1"></span>
                                </div>
                            </div>

                        </div>
                        <div class="d:flex fl-dir:column jc:center gap:3">
                            <div class="d:flex fl-dir:column jc:center gap:1">
                                <div th:text="${m.name + ', ' + m.quantity + m.quantityCategory + '(' + m.weight + m.weightCategory + ')'}">텃밭 흙 당근, 2개입</div>
                                <div th:text="${#numbers.formatInteger(m.price, 3, 'COMMA')} + ' 원'" class="fw:3">2,500원</div>
                            </div>
                            <div th:text="${m.likeCount}" class="deco icon:smile deco-color:sub-4 icon-size:1 deco-size:1">1234</div>
                        </div>
                    </div>
                    </a>
                </div>
            </section>

            <!--  아이템 목록(바둑판) / 확인  -->
            <section class="menu-card-col d:flex flex-wrap:wrap ai:center gap:5 md:d:none d:none">
                <h1 class="d:none">상품카드 - col</h1>
                <div th:each="m:${list}">
                    <a href="#" th:href="@{/user/product/detail(id=${m.id})}" class="">
                    <div class="d:flex fl-dir:column gap:3" style="width: 180px; height: 294px">
                        <div class="pos:relative">
                            <img th:src="${m.thumbnailPath + '/Meongmeong.jpg'}" src="" height="180px" width="180px" alt="상품 이미지" class="bd-radius:2"/>
                            <div class="cart-section">
                                <div class="cart-box" th:data-id="${m.id}"
                                     th:classappend="${m.cartQty}!= null ?'bg-color:main-6' ">
                                    <span th:if="${m.cartQty == null}"
                                          class="icon icon:shopping_cart_simple icon-color:base-1 icon-size:4">장바구니아이콘
                                    </span>
                                    <span th:if="${m.cartQty != null}" th:text="${m.cartQty}" class="color:base-1"></span>
                                </div>
                            </div>
                        </div>
                        <div class="d:flex fl-grow:1 fl-dir:column jc:center jc:space-between">
                            <div class="d:flex fl-dir:column jc:center gap:2">
                                <div th:text="${m.name + ', ' + m.quantity + m.quantityCategory + '(' + m.weight + m.weightCategory + ')'}">텃밭 흙 당근, 2개입</div>
                                <div th:text="${#numbers.formatInteger(m.price, 3, 'COMMA')} + ' 원'" class="fw:3">2,500원</div>
                            </div>
                            <div th:text="${m.likeCount}" class="deco icon:smile deco-color:sub-4 deco-size:1 icon-size:1">1234</div>
                        </div>
                    </div>
                    </a>
                </div>
            </section>
        </section>

        <!--  상품 영역 PC  -->
        <section class="prd-list-pc d:none md:d:flex flex-wrap:wrap row-gap:20 ai:center gap:2">
            <h1 class="d:none">상품카드 - pc</h1>
            <div th:each="m : ${list}" class="font-size:3" style="width:280px; height:404px">
                <a href="#" th:href="@{/user/product/detail(id=${m.id})}">
                <div class="d:flex fl-dir:column w:10p h:10p jc:space-between">
                    <div class="pos:relative">
                        <div>
                            <img th:src="${m.thumbnailPath + '/Meongmeong.jpg'}" src="" height="280px" width="280px" alt="상품 이미지" class="bd-radius:2"/>
                        </div>
                        <div class="cart-section">
                            <div class="cart-box" th:data-id="${m.id}"
                                 th:classappend="${m.cartQty}!= null ?'bg-color:main-6' ">
                                    <span th:if="${m.cartQty == null}"
                                          class="icon icon:shopping_cart_simple icon-color:base-1 icon-size:4">장바구니아이콘
                                    </span>
                                <span th:if="${m.cartQty != null}" th:text="${m.cartQty}" class="color:base-1"></span>
                            </div>
                        </div>
                    </div>
                    <div class="d:flex fl-dir:column jc:center gap:4">
                        <div class="d:flex fl-dir:column jc:center gap:2">
                            <div th:text="${m.name + ', ' + m.quantity + m.quantityCategory + '(' + m.weight + m.weightCategory + ')'}">텃밭 흙 당근, 2개입</div>
                            <div th:text="${#numbers.formatInteger(m.price, 3, 'COMMA')} + ' 원'" class="fw:3">2,500원</div>
                        </div>
                        <div th:text="${m.likeCount}" class="deco icon:smile deco-color:sub-4 icon-size:4 deco-size:4">1234</div>
                    </div>
                </div>
                </a>
            </div>

            <section class="pager d:flex w:10p mb:5 jc:center">
                <h1 class="d:none">페이저</h1>
                <ul class="n-pager d:flex " th:with="page=${param.p} eq null ? 1 : ${{param.p}}
                                                                , temp=(${page}-1)/5
                                                                , startnum=${T(java.lang.Math).floor(temp)}*5+1
                                                                , temp1=${count div 6}
                                                                , lastnum=${count} mod 6 eq 0 ? ${temp1} : ${temp1}+1">
                  <li>
                    <span th:if="${page} lt 6">이전</span>
                    <a th:if="${{page}} ge 6" th:href="@{./list(p=${startnum-1})}" href="list?p=1">이전</a>
                  </li>

                  <li th:each="n:${#numbers.sequence(startnum,startnum+4)}" th:class="${{param.p}} eq ${n}? 'active' : ''">
                    <span th:if="${n} gt ${lastnum}" th:text="${n}"></span>
                    <a th:if="${n} le ${lastnum}" th:href="@{./list(p=${n})}" th:text="${n}" href="list?p=1" >1</a>
                  </li>
                  <li>
                    <span th:if="${lastnum} lt ${startnum+5}">다음</span>
                    <a th:if="${lastnum} ge ${startnum+5}" th:href="@{./list(p=${startnum+5})}" href="list?p=6">다음</a>
                  </li>
                </ul>
            </section>    
        </section>
    </main>

</body>
</html>